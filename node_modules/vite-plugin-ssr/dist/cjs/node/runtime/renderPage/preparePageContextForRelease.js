"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.preparePageContextForRelease = void 0;
const utils_1 = require("../../utils");
const sortPageContext_1 = require("../../../shared/sortPageContext");
const helpers_1 = require("../helpers");
const addComputedUrlProps_1 = require("../../../shared/addComputedUrlProps");
const error_page_1 = require("../../../shared/route/error-page");
function preparePageContextForRelease(pageContext) {
    (0, addComputedUrlProps_1.assertURLs)(pageContext);
    (0, utils_1.assert)((0, utils_1.isPlainObject)(pageContext.routeParams));
    (0, utils_1.assert)('Page' in pageContext);
    (0, utils_1.assert)((0, utils_1.isObject)(pageContext.pageExports));
    (0, utils_1.assert)((0, utils_1.isObject)(pageContext.exports));
    (0, utils_1.assert)((0, utils_1.isObject)(pageContext.exportsAll));
    (0, sortPageContext_1.sortPageContext)(pageContext);
    if ((0, error_page_1.isErrorPage)(pageContext._pageId, pageContext._pageConfigs)) {
        (0, utils_1.assert)((0, utils_1.hasProp)(pageContext, 'is404', 'boolean'));
        (0, helpers_1.addIs404ToPageProps)(pageContext);
    }
}
exports.preparePageContextForRelease = preparePageContextForRelease;
