"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.setGlobalContext = void 0;
const globalContext_1 = require("../../runtime/globalContext");
const helpers_1 = require("../helpers");
const utils_1 = require("../utils");
function setGlobalContext() {
    return {
        name: 'vite-plugin-ssr:setGlobalContext',
        configureServer(viteDevServer) {
            (0, utils_1.objectAssign)(viteDevServer, { logTranspileError: helpers_1.logTranspileError, isTranspileError: helpers_1.isTranspileError });
            const ViteDevServerEnhanced = viteDevServer;
            (0, globalContext_1.setGlobalContextViteDevServer)(ViteDevServerEnhanced);
        },
        async configResolved(config) {
            (0, globalContext_1.setGlobalContextViteConfig)(config);
        }
    };
}
exports.setGlobalContext = setGlobalContext;
